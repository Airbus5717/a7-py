// State machine (match-driven)

io :: import "std/io"

State :: enum {
    Idle
    Running
    Paused
    Stopped
}

transition :: fn(current: State, next: State) State {
    io.println("transition")
    match next {
        case State.Idle: {
            io.println("state: Idle")
        }
        case State.Running: {
            io.println("state: Running")
        }
        case State.Paused: {
            io.println("state: Paused")
        }
        case State.Stopped: {
            io.println("state: Stopped")
        }
    }
    ret next
}

main :: fn() {
    io.println("=== State Machine ===")

    state := State.Idle
    state = transition(state, State.Running)
    state = transition(state, State.Paused)
    state = transition(state, State.Stopped)

    io.println("done")
}
